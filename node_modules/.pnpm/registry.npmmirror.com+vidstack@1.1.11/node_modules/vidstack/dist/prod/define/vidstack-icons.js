import { h as signal, e as effect, p as peek, d as defineCustomElement } from '../chunks/vidstack-4af9f92b.js';
import { lazyPaths } from 'media-icons';
import { c as cloneTemplateContent, a as createTemplate } from '../chunks/vidstack-e557f714.js';

const svgTemplate = /* @__PURE__ */ createTemplate(
  `<svg width="100%" height="100%" viewBox="0 0 32 32" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg"></svg>`
);
class MediaIconElement extends HTMLElement {
  constructor() {
    super(...arguments);
    this.Jf = this.Mf();
    this.Kf = signal("");
    this.q = signal(null);
    this.Lf = [];
  }
  static {
    this.tagName = "media-icon";
  }
  static get observedAttributes() {
    return ["type"];
  }
  /**
   * The type of icon. You can find a complete and searchable list on our website - see our
   * [media icons catalog](https://www.vidstack.io/media-icons?lib=html).
   */
  get type() {
    return this.q();
  }
  set type(type) {
    this.q.set(type);
    if (type)
      this.setAttribute("type", type);
    else
      this.removeAttribute("type");
  }
  attributeChangedCallback(name, _, newValue) {
    if (name === "type") {
      this.q.set(newValue ? newValue : null);
    }
  }
  connectedCallback() {
    this.classList.add("vds-icon");
    if (this.Jf.parentNode !== this) {
      this.prepend(this.Jf);
    }
    this.Lf.push(
      // Load
      effect(this.Nf.bind(this)),
      // Render
      effect(() => {
        this.Jf.innerHTML = this.Kf();
      })
    );
  }
  disconnectedCallback() {
    for (const fn of this.Lf)
      fn();
    this.Lf.length = 0;
  }
  Mf() {
    return cloneTemplateContent(svgTemplate);
  }
  Nf() {
    const type = this.q();
    if (type && lazyPaths[type]) {
      lazyPaths[type]().then(({ default: paths }) => {
        if (type === peek(this.q))
          this.Kf.set(paths);
      });
    } else {
      this.Kf.set("");
    }
  }
}

defineCustomElement(MediaIconElement);
