import{usePageData as y,useSiteData as $,defineClientConfig as G}from"@vuepress/client";import{useLocaleConfig as I,VPLink as v,startsWith as C,keys as U,endsWith as m,hasGlobalComponent as k}from"vuepress-shared/client";import{defineComponent as D,computed as K,h as t}from"vue";import{useRouter as M}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogIconComponent as R,injectAutoCatalogIconComponent as S}from"./index.js";var Y=D({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,indexType:{type:String,default:"ul"},hideHeading:Boolean},setup(o){const u=R(),f=I(AUTO_CATALOG_LOCALES),T=y(),_=M(),E=$(),O=c=>{const r=c[AUTO_CATALOG_INDEX_META_KEY];return typeof r>"u"||r},b=()=>{const c=o.base||T.value.path.replace(/\/[^/]+$/,"/"),r=_.getRoutes(),h=[];return r.filter(({meta:l,path:e})=>{if(!C(e,c)||e===c)return!1;if(c==="/"){const a=U(E.value.locales).filter(n=>n!=="/");if(e==="/404.html"||a.some(n=>C(e,n)))return!1}return(m(e,".html")&&!m(e,"/index.html")||m(e,"/"))&&O(l)}).map(({path:l,meta:e})=>{const a=l.substring(c.length).split("/").length;return{title:e[AUTO_CATALOG_TITLE_META_KEY]||"",icon:e[AUTO_CATALOG_ICON_META_KEY],base:l.replace(/\/[^/]+\/?$/,"/"),order:e[AUTO_CATALOG_ORDER_META_KEY]||null,level:m(l,"/")?a-1:a,path:l}}).filter(({title:l,level:e})=>l&&e<=o.level).sort(({title:l,level:e,path:a,order:n},{title:s,level:i,path:d,order:p})=>e-i||(m(a,"/index.html")?-1:m(d,"/index.html")?1:n===null?p===null?l.localeCompare(s):p:p===null?n:n>0?p>0?n-p:-1:p<0?n-p:1)).forEach(l=>{var e;const{base:a,level:n}=l;switch(n){case 1:h.push(l);break;case 2:{const s=h.find(i=>i.path===a);s&&(s.children??=[]).push(l);break}default:{const s=h.find(i=>i.path===a.replace(/\/[^/]+\/$/,"/"));if(s){const i=(e=s.children)==null?void 0:e.find(d=>d.path===a);i&&(i.children??=[]).push(l)}}}}),h},A=K(()=>b());return()=>t("div",{class:"vp-catalog"},[o.hideHeading?null:t("h2",{class:"vp-catalog-main-title"},f.value.title),A.value.length?A.value.map(({children:c=[],icon:r,path:h,title:l},e)=>[t("h3",{id:l,class:["vp-catalog-child-title",{"has-children":c.length}]},[t("a",{href:`#${l}`,class:"header-anchor","aria-hidden":!0},"#"),t(v,{class:"vp-catalog-title",to:h},()=>[o.index?`${e+1}.`:null,r&&u?t(u,{icon:r}):null,l||h])]),c.length?t(o.index&&o.indexType==="ol"?"ol":"ul",{class:"vp-catalog-child-catalogs"},c.map(({children:a=[],icon:n,path:s,title:i},d)=>t("li",{class:"vp-child-catalog"},[t("div",{class:["vp-catalog-sub-title",{"has-children":a.length}]},[t("a",{href:`#${i}`,class:"header-anchor"},"#"),t(v,{class:"vp-catalog-title",to:s},()=>[o.index?`${e+1}.${d+1}`:null,n&&u?t(u,{icon:n}):null,i||s])]),a.length?t("div",{class:"v-sub-catalogs"},a.map(({icon:p,path:g,title:x},L)=>t(v,{class:"vp-sub-catalog",to:g},()=>[o.index&&o.indexType!=="ol"?`${e+1}.${d+1}.${L+1}`:null,p&&u?t(u,{icon:p}):null,x||g]))):null]))):null]):t("p",{class:"vp-empty-catalog"},f.value.empty)])}}),N=G({enhance:({app:o})=>{S(o),k("AutoCatalog",o)||o.component("AutoCatalog",Y)}});export{N as default};
//# sourceMappingURL=config.js.map
